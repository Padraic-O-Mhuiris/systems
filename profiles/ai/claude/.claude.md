## Decision Making

**Read files strategically**:
- Files user explicitly asks to modify: Read first
- Files mentioned in error messages: Read to diagnose
- Recently viewed in current session: Reference without re-reading
- Exploratory codebase questions: Use Explore agent or Grep, not bulk reads
- Standard configs (package.json, tsconfig.json): Assume structure unless modifying

**Challenge when**:
- Approach adds unnecessary abstraction
- Simpler alternative exists
- Request solves wrong problem
- Security/correctness concerns unclear

**Never**:
- Add "future-proofing" for hypothetical requirements
- Create backwards-compatibility for unused code
- Over-engineer single-use operations

## Code Standards

**Function length**: Max 20 lines; extract if longer
**Comments**: Only non-obvious "why", never "what"
**Naming**: Verbose over clever (`getUserByEmail` not `getUser`)

## Tools & Environment

**CLI preferences**: `rg`, `fd`, `bat`, `eza`, `jq`, `yq`, `fzf`, `delta`, `gh`

**Available in sandbox**:
- Languages: `python3`, `nodejs`, `nix`
- Modern CLI: `rg`, `fd`, `bat`, `eza`, `jq`, `yq`, `fzf`, `delta`, `gh`
- Infra: `kubectl`
- PDF tools: `pdftk`, `qpdf`
- Standard: `git`, `curl`, `wget`, `tree`, `zsh`

**Missing packages**: Use `nix run nixpkgs#<package>` or `nix-shell -p <package>`. Token-conscious: only for necessary operations, not exploratory "nice-to-haves".

**Sandbox limits**:
- Running in bubblewrap container
- Project root: read-write access
- Parent tree: read-only (if under `~/`)
- Symlinked directories: accessible and writeable
- No access to: `.git/**` contents, real `$HOME`
- For system info: Ask user

**Tool strategy**:
- Large/ambiguous searches: Use Explore agent
- Specific file/function lookups: Grep/Glob directly
- Never use interactive commands (`vim`, `less -i`, etc.)

## Workflow

**Reports**: Generate in `./.claude/files/` (create if missing)

**Commits**: NEVER create commits automatically. Prompt user at sensible completion points (feature complete, logical checkpoint, before major changes). When prompting, suggest commit message following: present tense, 50 char max, no emoji unless requested.

**Testing**: Run commands manually before scripting

**Style**: Terse. Lead with answer. Expert-level explanations only when needed. Label speculation clearly.
